const documentElement=document.documentElement,themeToggleElement=document.querySelector(".theme"),nameInputElement=document.querySelector(".form__input_name"),telInputElement=document.querySelector(".form__input_tel"),formElement=document.querySelector(".form"),tableElement=document.querySelector(".table__body");let records=[["Иванов Иван Иванович","+7 777 777-77-77"],["Петров Петр Петрович","+7 777 777-77-77"]],nameInputElementValue="",telInputElementValue="";const changeTheme=e=>{documentElement.dataset.theme=e.target.id},createNewRecord=(e,t,n)=>{const l=document.createDocumentFragment(),a=document.createElement("tr"),m=document.createElement("th"),d=document.createElement("td"),r=document.createElement("td"),c=document.createElement("span"),o=document.createElement("span");return a.classList.add("table__row"),m.classList.add("table__cell"),d.classList.add("table__cell"),r.classList.add("table__cell","table__cell_tel"),o.classList.add("table__trash"),o.dataset.row=n,m.innerText=n,d.innerText=e,c.innerText=t,r.appendChild(c),r.appendChild(o),a.appendChild(m),a.appendChild(d),a.appendChild(r),l.appendChild(a),a},updateRecordsElements=()=>{console.log("work");const e=document.createDocumentFragment();records.forEach(((t,n)=>e.appendChild(createNewRecord(t[0],t[1],n+1)))),tableElement.innerHTML="",tableElement.appendChild(e)},removeRecordsItem=e=>{records.splice(e,1),updateRecordsElements()},onNameInputElementChange=e=>nameInputElementValue=e.target.value,onTelInputElementChange=e=>telInputElementValue=e.target.value,onFormSubmit=e=>{e.preventDefault();if(nameInputElement.value.match(/^[А-Я][а-я]+\s[А-Я][а-я]+\s[А-Я][а-я]+$/)&&telInputElement.value.match(/^(\+7)\s[0-9]{3}\s[0-9]{3}-[0-9]{2}-[0-9]{2}$/)){const e=createNewRecord(nameInputElement.value,telInputElement.value,records.length+1);records.push([nameInputElement.value,telInputElement.value]),tableElement.appendChild(e)}},onTrashClick=e=>{var t;e.target.classList.contains("table__trash")&&(t=parseInt(e.target.dataset.row,10)-1,records.splice(t,1),updateRecordsElements(),updateRecordsElements())};themeToggleElement.addEventListener("change",changeTheme),nameInputElement.addEventListener("input",onNameInputElementChange),telInputElement.addEventListener("input",onTelInputElementChange),formElement.addEventListener("submit",onFormSubmit),tableElement.addEventListener("click",onTrashClick);